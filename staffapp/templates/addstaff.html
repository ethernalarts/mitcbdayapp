{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}
    <title>
        Add a Staff
    </title>
{% endblock %}

{% block content %}

    <!-- Navbar Searchbar -->
    {% include 'snippets/searchbar.html' %}

    <!-- Progress bar -->
    <div class="progress-bar"></div>

    <!-- Outer Container -->
    <div
        class="bg-white w-full md:max-w-5xl flex items-center shadow-md rounded-none mb-12
               justify-center mx-auto mt-4 md:mt-8 py-8"
    >
    
        <!-- Inner Container -->
        <div class="w-full -mt-6 min-h-full px-8 lg:px-10 pt-8 pb-4">

            <!-- Profile Picture -->
            <div class="mb-4 flex flex-col items-center">
                <img class="mb-4 mt-1 w-32 h-32 rounded-full shadow-sm" src="{% static 'img/default.png' %}">
            </div>

            <!-- Form Title -->
            <div>
                <h2
                    class="mb-6 text-center text-3xl font-extrabold underline
                           underline-offset-2 text-gray-900"
                >
                    Add a Staff
                </h2>
            </div>

            <p class="text-md mt-10 font-medium text-red-600">
                <em>Fields marked with <span class="text-lg font-medium text-red-600"><em>*</em></span> are required</em>
            </p>

            <!-- Form -->
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Form Sections and Fields -->
                <fieldset>
                    <!-- BIO DETAILS -->
                    <div>

                        <!-- HEADER - BIO DETAILS -->
                        <h2 class="mt-10 text-xl font-bold py-2 px-4 bg-green-900 text-white">
                            1. Personal Details
                        </h2>

                        <!-- Bio Details -->
                        <div
                            class="grid gap-6 mt-1 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 px-4 pb-6 pt-4
                                   md:px-6 md:pb-8 bg-stone-50 border border-1 border-gray-300 shadow-md"
                        >

                            <!-- First Name -->
                            <div>
                                <label for="first_name" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.first_name.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="first_name">
                                    {% render_field form.first_name class+="text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.first_name %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.first_name }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Middle name -->
                            <div>
                                <label for="middle_name" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.middle_name.label }}
                                </label>

                                <div id="middle_name">
                                    {% render_field form.middle_name class+="text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.middle_name %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.middle_name }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Surname -->
                            <div>
                                <label for="last_name" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.last_name.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="last_name">
                                    {% render_field form.last_name class+="text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.last_name %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.last_name }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Phone Number -->
                            <div>
                                <label for="phone_number" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.phone_number.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="phone_number">
                                    {% render_field form.phone_number class+="text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.phone_number %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.phone_number }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Gender -->
                            <div>
                                <label for="gender" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.gender.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="gender">
                                    {% render_field form.gender class+="cursor-pointer text-lg md:text-lg font-bold block w-full py-2.5 px-2 pr-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.gender %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.gender }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Date of Birth -->
                            <div>
                                <label for="date_of_birth" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.date_of_birth.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="date_of_birth">
                                    {% render_field form.date_of_birth class+="cursor-pointer text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.date_of_birth %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.date_of_birth }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Profile Photo -->
                            <div class="break-all col-span-full">
                                <label for="staff_image" class="block text-lg font-bold leading-6 text-gray-500">
                                    Profile Picture
                                </label>
                                <div
                                    class="mt-2 flex justify-center rounded-none border-dashed border-2 border-gray-300
                                           px-6 py-10 md:py-7"
                                >
                                    <div class="text-center">
                                        <svg class="mx-auto h-16 w-16 text-gray-300" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                            <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
                                        </svg>
                                        <div
                                            id="staff_image"
                                            class="mt-4 flex text-md leading-6 text-gray-600 place-items-center"
                                        >
                                            <label
                                                for="staff_image"
                                                class="relative cursor-pointer items-center rounded-none bg-white
                                                       font-semibold text-indigo-600 focus-within:outline-none
                                                       focus-within:ring-2 focus-within:ring-indigo-600
                                                       focus-within:ring-offset-2 hover:text-indigo-500"
                                            >
                                                {% render_field form.staff_image class+='cursor-pointer' %}
                                            </label>
                                        </div>
                                        <p class="text-xs leading-5 text-gray-600 text-center">PNG, JPG, JPEG</p>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>


                    <!-- OFFICIAL DETAILS -->
                    <div>

                        <!-- HEADER - OFFICIAL DETAILS -->
                        <h2 class="mt-14 text-xl font-bold py-2 px-4 bg-green-900 text-white">
                            2. Official Details
                        </h2>

                        <!-- Official Details -->
                        <div
                            class="grid gap-6 mt-1 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 px-4 pb-6 pt-4
                                   md:px-6 md:pb-8 bg-stone-50 border border-1 border-gray-300 shadow-md"
                        >

                            <!-- Official Email -->
                            <div>
                                <label for="first_name" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.official_email.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="official_email">
                                    {% render_field form.official_email class+="text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.official_email %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.official_email }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Cadre -->
                            <div>
                                <label for="cadre" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.cadre.label }}
                                </label>

                                <div id="cadre">
                                    {% render_field form.cadre class+="cursor-pointer text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.cadre %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.cadre }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Department -->
                            <div>
                                <label for="department" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.department.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="department">
                                    {% render_field form.department class+="cursor-pointer text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.department %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.department }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- First Appointment -->
                            <div>
                                <label for="first_appointment" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.first_appointment.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="first_appointment">
                                    {% render_field form.first_appointment class+="cursor-pointer text-lg md:text-lg font-bold block w-full p-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.first_appointment %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.first_appointment }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Grade Level -->
                            <div>
                                <label for="grade_level" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.grade_level.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="grade_level">
                                    {% render_field form.grade_level class+="cursor-pointer text-lg md:text-lg font-bold block w-full py-2.5 px-2 pr-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.grade_level %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.grade_level }}
                                    </span>
                                {% endif %}
                            </div>

                            <!-- Step -->
                            <div>
                                <label for="step" class="block mb-2 text-md font-bold text-gray-500">
                                    {{ form.step.label }}
                                    <span class="ml-1 text-1xl font-medium text-red-600">
                                        <em>*</em>
                                    </span>
                                </label>

                                <div id="step">
                                    {% render_field form.step class+="cursor-pointer text-lg md:text-lg font-bold block w-full py-2.5 px-2 pr-2 rounded-sm border border-2 border-gray-300 bg-white text-gray-800 focus:outline-none focus:ring-green-900 focus:border-green-900 focus:z-10" %}
                                </div>

                                {% if form.errors.step %}
                                    <span class="text-red-600 font-medium">
                                        {{ form.errors.step }}
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                </fieldset>
    
                <!-- Submit Button -->
                <div class="flex items-center mx-auto w-full md:max-w-xl space-x-4 justify-center mt-14">
                    <!-- Submit -->
                    <button
                        type="submit"
                        class="group relative w-full flex items-center mx-auto justify-center mt-6 mb-4 p-4
                                border border-transparent text-md font-medium rounded-none text-white bg-green-900
                                hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-offset-2
                                focus:ring-green-800"
                    >
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="currentColor" class="-ml-1 mr-2 h-5 w-5 text-white">
                                <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z" />
                            </svg>
                            Submit
                    </button>

                    <!-- Clear form -->
                    <button
                        type="reset"
                        class="group relative w-full flex items-center mx-auto justify-center mt-6 mb-4 p-4
                               border border-red-700 text-md font-medium rounded-none text-white bg-red-700
                              hover:bg-red-600 focus:outline-none focus:ring-4 focus:ring-offset-2
                              focus:ring-red-500 hover:border-red-600"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor" class="-ml-1 mr-2 h-5 w-5 text-white">
                            <path fill-rule="evenodd" d="M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z" clip-rule="evenodd" />
                        </svg>
                        Reset
                    </button>
                </div>
            </form>
            <!-- End of form -->

            <!-- JavaScript to close error message -->
            <script>
                // Get the error message popup
                var message = document.getElementsByClassName("error-message");

                // Get the X <button> element that closes the error message
                var closebutton = document.getElementsByClassName("close-error-message");

                // Get the X <button> to close each error message
                for (let i = 0; i < message.length; i++) {
                    for (let i = 0; i < closebutton.length; i++) {
                        closebutton[i].onclick = function () {
                            message[i].style.display = "none";
                        } 
                    }
                }
            </script>
        </div>
    </div>
{% endblock %}